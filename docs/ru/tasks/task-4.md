# Задание 4

## Подготовка

- Скачать и установить (если не установлены):

    - GoLand (https://www.jetbrains.com/ru-ru/go/ или через ToolBox)

    - Go (https://go.dev/dl/)

- Из IDE GoLand загрузить репозиторий openstadia-storage с использованием функции **Get From VCS**. В поле URL
  ввести: <https://github.com/openstadia/openstadia-storage.git>

  ![изображение](/task4/image001.png)

- Для сборки проекта используйте команду: `go build`

- Для запуска проекта используйте команду: `./openstadia-storage.exe`

## Задание

Целью данной работы является разработка модуля объектного хранилища для системы OpenStadia. Пользователь должен иметь
возможность запрашивать список файлов в его хранилище, добавлять новые файлы и скачивать загруженные файлы. Для хранения
файлов используется система Minio (<https://min.io/>). Модуль должен быть реализован в виде отдельного микросервиса на
языке Golang. Для каждого пользователя должен создаваться отдельный бакет (Bucket) с ограничением по объему хранимых
файлов (по умолчанию до 1GB). Пользователь должен видеть на сколько заполнено его хранилище и сколько свободного места
ещё осталось. Для сервиса должен быть создан файл Docker Compose для развертывания решения.

Список поддерживаемых пользовательских запросов к сервису и их описание:

- Получение информации о хранилище пользователя (пользователь может не иметь доступа к хранилищу)

- Получение списка файлов пользователя

- Загрузка файлов пользователем. Сервис генерирует Pre-signed
  ссылку (<https://min.io/docs/minio/linux/integrations/presigned-put-upload-via-browser.html>) для клиента, после чего
  файл загружается в Minio.

- Пользователь может скачать свой файл. Также сервис генерирует Pre-signed ссылку для загрузки файла, после чего браузер
  автоматически начинает скачивание файла.

- Пользователь может запросить удаление файла из системы хранения.

На пользовательском портале должен быть доступен раздел Storage, в котором отображается:

- Список пользовательских файлов, с возможностью скачивания файла или его удаления

- Кнопка для загрузки нового файла. Пользователь должен иметь возможность отслеживать статус загрузки файла на сервер.
  После загрузки файл должен появиться в списке файлов. В случае неудачной загрузки, пользователю должно отобразиться
  сообщение об ошибке.

- При нажатии на кнопку скачивания браузер должен автоматически начать процесс загрузки файла.

- При нажатии на кнопку удаления, если удаление прошло успешно, файл должен пропасть из списка файлов.

### Дополнительно

- Бакет должен иметь название: user-\<user-id\>, где \<user-id\> - уникальный идентификатор пользователя в системе. Для
  получения информации о пользователе сервис должен обращаться к сервису хаба по пути /users/me с заголовком
  Authorization.

- Администратор должен иметь возможность задавать для каждого пользователя размеры хранилища или отключать возможность
  хранилища.

### Ссылки

- https://min.io/
- https://min.io/docs/minio/linux/developers/go/API.html
- https://github.com/minio/minio-go
- https://github.com/minio/madmin-go
